# Generated by Ansible
localPeer:
  id: {{ inventory_hostname }}
  address: {{ ansible_default_ipv4 }}
  port: {{ vip.port }}
remotePeers:
{% for host in masters %}
- id: {{ hostvars[host].inventory_hostname }}
  address: {{ hostvars[host].ansible_default_ipv4.address }}
  #address: {{ hostvars[host]['ansible_default_ipv4']['address'] }}
  port: {{ vip.port }}
{% endfor %}
vip: {{ vip.address }}/{{ vip.subnet }}
gratuitousARP: true
singleNode: false
startAsLeader: {{ vip.leader|default('false') }}
interface: {{ vip.interface|default({{ ansible_default_ipv4.interface }}) }}
loadBalancers:
- name: API Server Load Balancer
  type: {{ vip.mode|default(tcp) }}
  port: {{ vip.front_port|default(6446) }}
  bindToVip: true
  backends:
  {% for host in masters %}
  - address: {{ hostvars[host].ansible_default_ipv4.address }}
    port: {{ vip.back_port }}
  {% endfor %}
